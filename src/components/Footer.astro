---
import { getCollection } from "astro:content";

const plushies = await getCollection("plushies");
const allTechs = new Set<string>();

plushies.forEach((plushie) => {
    plushie.data.techs.forEach((tech) => {
        allTechs.add(tech);
    });
});

const techs = Array.from(allTechs).sort();
---

<footer class="site-footer">
    <div class="footer-content">
        <div class="footer-section">
            <h3>// EXPLORE BY TECH</h3>
            <div class="tech-cloud">
                {
                    techs.map((tech) => {
                        const slug = tech
                            .toLowerCase()
                            .replace(/[^a-z0-9]+/g, "-")
                            .replace(/(^-|-$)+/g, "");
                        return (
                            <a href={`/tech/${slug}`} class="tech-link">
                                {tech}
                            </a>
                        );
                    })
                }
            </div>
        </div>
        <div class="footer-section copyright">
            <div class="copyright-content">
                <span>PLUSHIES.DEV © {new Date().getFullYear()}</span>
                <span class="separator hidden-mobile">//</span>
                <span>Made with ❤️ by <a href="https://yoandev.co" target="_blank" class="accent-link">YoanDev</a></span>
                <span class="separator hidden-mobile">//</span>
                <a href="https://github.com/YoanDev/plushies.dev" target="_blank" class="github-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                    <span>GitHub</span>
                </a>
            </div>
        </div>
    </div>
</footer>

<style>
    /* ... existing styles ... */
    .site-footer {
        margin-top: 100px;
        padding-top: 40px;
        border-top: 1px solid var(--card-border);
        color: var(--text-muted);
        font-family: "Space Mono", monospace;
        font-size: 0.8rem;
    }

    .footer-content {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    .footer-section h3 {
        color: var(--accent-neon);
        margin-bottom: 1rem;
        font-size: 0.9rem;
        text-transform: uppercase;
    }

    .tech-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .tech-link {
        color: var(--text-muted);
        text-decoration: none;
        border: 1px solid var(--card-border);
        padding: 5px 10px;
        border-radius: 4px;
        transition: all 0.2s;
        font-size: 0.75rem;
        text-transform: uppercase;
    }

    .tech-link:hover {
        color: var(--accent-neon);
        border-color: var(--accent-neon);
        background: rgba(204, 255, 0, 0.05);
    }

    .copyright {
        margin-top: 2rem;
        border-top: 1px solid var(--card-border); /* Optional: subtle separator */
        padding-top: 2rem;
    }

    .copyright-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        opacity: 0.5;
    }

    @media (min-width: 768px) {
        .copyright-content {
            flex-direction: row;
            justify-content: center;
            gap: 1rem;
        }
    }

    .separator {
        color: var(--accent-neon);
        display: none;
    }

    @media (min-width: 768px) {
        .separator {
            display: inline;
        }
    }

    .accent-link {
        color: var(--accent-neon);
        text-decoration: none;
    }

    .github-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: inherit;
        text-decoration: none;
        transition: color 0.2s;
    }

    .github-link:hover {
        color: var(--accent-neon);
    }
</style>

